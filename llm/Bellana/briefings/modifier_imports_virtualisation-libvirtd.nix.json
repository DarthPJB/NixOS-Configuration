{"filename": "modifier_imports/virtualisation-libvirtd.nix", "path": "modifier_imports/virtualisation-libvirtd.nix", "function_summary": "Enables libvirt virtualization stack with QEMU/KVM support.", "detailed_notes": "This module configures a complete virtualization environment using libvirt, the most widely adopted virtualization API. It enables the libvirtd daemon, which provides a common interface for managing virtual machines across different hypervisors. The QEMU configuration includes software TPM (Trusted Platform Module) support via swtpm, enhancing security for virtual machines requiring TPM functionality. OVMF (Open Virtual Machine Firmware) configuration is prepared but commented out, indicating flexibility for UEFI-based virtual machines. The setup configures libvirt to ignore virtual machines on boot and shutdown them gracefully on system shutdown. Firewall rules are adjusted to trust the virbr0 bridge interface, ensuring proper network connectivity for virtual machines. User permissions are managed to allow non-root QEMU execution, improving security. This configuration creates a robust virtualization platform suitable for running multiple virtual machines with hardware-assisted virtualization, software TPM, and proper network isolation."}